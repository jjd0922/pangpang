<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.newper.mapper.CategoryMapper">

    <select id="selectCategoryListByParent" resultType="map">
        SELECT
            P.*,
            COUNT(C.CATE_IDX) AS CNT
        FROM
            CATEGORY P
                LEFT JOIN
            (
                SELECT
                    CATE_IDX
                FROM
                    CATEGORY
                where
                    CATE_PARENT_IDX IS NOT null
                GROUP BY CATE_IDX
            ) C
            ON P.CATE_IDX = C.CATE_IDX
        WHERE
            CATE_PARENT_IDX IS NULL

    </select>

    <select id="selectCategoryListByChildren" resultType="map">
        select
            *
        from
            category
        where
            CATE_PARENT_IDX=#{CATE_PARENT_IDX}
    </select>




</mapper>