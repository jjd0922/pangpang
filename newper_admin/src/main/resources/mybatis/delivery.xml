<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.newper.mapper.DeliveryMapper">
    <select id="selectDeliveryDatatable" resultType="map">

        SELECT
            O_STATE,O_IDX,O_CODE,G_STATE,G_IDX,SHOP_NAME,P_IDX,P_NAME,P_DEL_TOGETHER,OG_IDX,
            DN_COMPANY,DN_NUM,DN_DATE
        FROM
            orders
                LEFT JOIN order_gs
                          ON OG_O_IDX=O_IDX
                LEFT JOIN shop_product_option
                          ON OG_SPO_IDX=SPO_IDX
                LEFT JOIN goods_stock
                          ON SPO_GS_IDX=GS_IDX
                LEFT JOIN delivery_num
                          ON OG_DN_IDX=DN_IDX
                LEFT JOIN product
                          ON GS_P_IDX=P_IDX
                LEFT JOIN payment
                          ON O_PAY_IDX=PAY_IDX
                LEFT JOIN shop_product_add
                          ON SPO_SPA_IDX=SPA_IDX
                LEFT JOIN shop_product
                          ON SPA_SP_IDX=SP_IDX
                LEFT JOIN goods
                          ON G_IDX=OG_G_IDX
                LEFT JOIN shop
                          ON O_SHOP_IDX=SHOP_IDX
        <if test="length!=-1">
            limit #{start},#{length}
        </if>
    </select>

    <select id="countDeliveryDatatable" resultType="integer">
        SELECT
           COUNT(*)
        FROM
            orders
                LEFT JOIN order_gs
                          ON OG_O_IDX=O_IDX
                LEFT JOIN shop_product_option
                          ON OG_SPO_IDX=SPO_IDX
                LEFT JOIN goods_stock
                          ON SPO_GS_IDX=GS_IDX
                LEFT JOIN delivery_num
                          ON OG_DN_IDX=DN_IDX
                LEFT JOIN product
                          ON GS_P_IDX=P_IDX
                LEFT JOIN payment
                          ON O_PAY_IDX=PAY_IDX
                LEFT JOIN shop_product_add
                          ON SPO_SPA_IDX=SPA_IDX
                LEFT JOIN shop_product
                          ON SPA_SP_IDX=SP_IDX
                LEFT JOIN goods
                          ON G_IDX=OG_G_IDX
                LEFT JOIN shop
                          ON O_SHOP_IDX=SHOP_IDX

    </select>

</mapper>
