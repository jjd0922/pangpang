<style>
    .input1{
        background-color:lightgray;
    }
</style>
<div class="modal" tabindex="-1" role="dialog" id="lostModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">자산처리 팝업</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="collapse show" id="collapse-button-collapsed">
                    <div class="card-body pt-0">
                        <form id="modalForm">
                            <div class="card">
                                <div class="card-body popup-contents">
                                    <fieldset class="mb-0">
                                        <legend>1.등록정보  <span class="small ml-2"><i class="icon-info22 text-secondary mr-1 opacity-80"></i></span></legend>
                                        <div class="row">
                                            <!-- 입력필드 -->
                                            <div class="col-sm-12 ">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                         <span class="input-group-prepend">
                                                                <span class="input-group-text requested">
                                                                  자산상태
                                                                </span>
                                                            </span>
                                                        <input type="text" name="gState" class="form-control" readonly>
                                                        <input type="hidden" name="gIdxs">

                                                        <span class="input-group-prepend">
                                                                <span class="input-group-text">
                                                                  자산처리일
                                                                </span>
                                                          </span>
                                                        <input type="text" name="lostDate" class="form-control w-datarange daterange-single">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <span class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                처리자
                                                            </span>
                                                        </span>
                                                        <input type="text" name="lostBy" class="form-control" th:value="${@sessionInfo.id}" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <span class="input-group-prepend">
                                                            <span class="input-group-text">
                                                           처리사유
                                                            </span>
                                                        </span>
                                                        <input type="text" name="lostReason" class="form-control">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="mdSave" onclick="goodsLost();">확인</button>
                                <button type="button" class="btn btn-primary" onclick="window.close();"><i class="icon-cross2 mr-1"></i>취소</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function openGoodsStateModal(state) {
        var gIdxs = '';

        $.each($('.selected'), function (index, value) {
            gIdxs += $(this).children('.select-checkbox').children('input').val() + ',';
        });
        gIdxs = gIdxs.slice(0, -1);

        if (gIdxs == '') {
            alert("자산을 선택해 주세요");
            return false;
        }

        $('input[name=gState]').val(state);

        $('input[name=gIdxs]').val(gIdxs);
        $('#lostModal').modal('show');
    }

    // 자산 망실처리
    function goodsLost() {
        $.ajax({
            url:'/goods/updateGoodsLost.ajax',
            data: $('#modalForm').serialize(),
            type: 'POST'
        })
    }
</script>
