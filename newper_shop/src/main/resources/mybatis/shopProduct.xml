<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.newper.mapper.ShopProductMapper">
    <select id="selectShopProductOptionList" resultType="map">
        SELECT
            SHOP_PRODUCT_OPTION.*
             ,FORMAT(SPO_PRICE, 0 ) SPO_PRICE_F
        FROM SHOP_PRODUCT_OPTION, SHOP_PRODUCT_ADD
        WHERE
            SPO_SPA_IDX = SPA_IDX
            AND SPA_SP_IDX = #{sp_idx}
        ORDER BY SPO_IDX ASC
    </select>

    <select id="selectscateMainSectionProductList" parameterType="map" resultType="map">
        SELECT
            *
        FROM
            SHOP_PRODUCT
            ,SHOP_CATEGORY
            ,CATEGORY_SHOP_CATEGORY
            ,CATEGORY
            ,MAIN_SECTION
            ,MAIN_SECTION_SP
        WHERE
            CSC_SCATE_IDX = SCATE_IDX
            AND CSC_CATE_IDX = CATE_IDX
            AND SP_CATE_IDX = CATE_IDX
            AND MSSP_MS_IDX = MS_IDX
            AND MSSP_SP_IDX = SP_IDX
            AND MS_IDX = #{msIdx}
            AND SCATE_IDX = #{scateIdx}
    </select>

    <select id="selectCategoryProductList" resultType="map" parameterType="map">
        SELECT
            d.*
        FROM
            category a
           ,shop_category b
           ,category_shop_category c
           ,shop_product d
        WHERE
            CATE_IDX = CSC_CATE_IDX
          AND SCATE_IDX = CSC_SCATE_IDX
          AND SP_CATE_IDX = CATE_IDX
--           AND CATE_IDX = 38
    </select>
    <select id="countCategoryProductList" resultType="Integer" parameterType="map">
        SELECT
            count(sp_idx) cnt
        FROM
            category a
           ,shop_category b
           ,category_shop_category c
           ,shop_product d
        WHERE
            CATE_IDX = CSC_CATE_IDX
          AND SCATE_IDX = CSC_SCATE_IDX
          AND SP_CATE_IDX = CATE_IDX
--           AND CATE_IDX = 38
    </select>
</mapper>