<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.newper.mapper.CategoryMapper">

    <select id="selectCategoryDatatableByChildren" resultType="map">
        SELECT
            CATE_IDX,CATE_NAME,CSC_IDX,CSC_ORDER
        FROM
            category
                LEFT JOIN category_shop_category
                          ON CATE_IDX=CSC_CATE_IDX
                LEFT JOIN shop_category
                          ON SCATE_IDX=CSC_SCATE_IDX
        WHERE
            CATE_DEPTH=2
          AND CSC_SCATE_IDX=#{SCATE_IDX}
        ORDER BY CSC_ORDER
    </select>

    <select id="selectCategoryListByParent" resultType="map">
        select
            CATE_IDX,CATE_NAME
        from
            category
        where
            CATE_PARENT_IDX is null
            and CATE_TYPE='CATEGORY'
    </select>

</mapper>
