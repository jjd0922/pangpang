<th:block th:fragment="PRODUCT">
    <legend class="">3. 구성상품
        <a onclick="openShopProductModal()" class="btn btn-sm btn-primary ml-1">추가</a>
        <a class="btn btn-sm btn-danger ml-1" onclick="resetShopProduct()">전체 삭제</a>
    </legend>
    <table class="table">
        <thead>
        <tr>
            <th>상품 상태</th>
            <th>상품명</th>
            <th>삭제</th>
        </tr>
        </thead>
        <tbody id="shopProductTbody">
        <th:block th:if="${mainSectionSps != null and not mainSectionSps.isEmpty }" th:each="mainSectionSp:${mainSectionSps}">
            <tr>
                <td th:text="${mainSectionSp.SP_STATE}"></td>
                <td th:text="${mainSectionSp.SP_NAME}"></td>
                <td>
                    <input type="hidden" name="spIdx" th:value="${mainSectionSp.SP_IDX}">
                    <a class="btn btn-sm btn-danger" th:onclick="|javascript:deleteShopProduct('${mainSectionSp.SP_IDX}')|">삭제</a>
                </td>
            </tr>
        </th:block>
        </tbody>
    </table>

    <script>
        //구성상품 지우기
        function resetShopProduct(){
            if(window.confirm('구성상품을 전부 삭제하시겠습니까? \n 설정 후 아래 *저장 버튼을 눌러야 DB에 반영됩니다.')){
                $('#shopProductTbody').html('')
            }
        }

        //구성상품 삭제
        function deleteShopProduct(spIdx){
            if(window.confirm('구성상품을 삭제하시겠습니까? \n 설정 후 아래 *저장 버튼을 눌러야 DB에 반영됩니다.')){
                $( $('input[name=spIdx][value='+spIdx+']').parents('tr')[0] ).remove();
            }
        }
    </script>
    <!--shopProduct modal-->
    <th:block th:replace="design/modal/shopProductModal.html"></th:block>
</th:block>

<th:block th:fragment="BANNER">
    <legend class="">
        2. 섹션 상세 정보
        <a onclick="addBanner()" class="btn btn-sm btn-primary ml-1">배너 추가</a>
    </legend>

    <div class="row" th:if="${mainSectionBanners != null and not mainSectionBanners.isEmpty }" th:each="banner : ${mainSectionBanners}">
        <div class="col-sm-12 text-right" style="margin-top:20px;margin-bottom:5px;">
            <a class="btn btn-sm btn-danger ml-1" onclick="removeBannerDom(this)">삭제</a>
        </div>
        <div class="col-sm-12 col-md-6">
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-prepend">
                        <span class="input-group-text">노출순서</span>
                    </span>
                    <input type="number" class="form-control" name="msbnOrder" th:value="${banner.msbnOrder}" min="1">
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-6">
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-prepend">
                        <span class="input-group-text">배너이미지(WEB)</span>
                    </span>
                    <input type="file" class="form-control form-control-plaintext" placeholder="파일첨부" name="msbnWebFile" accept="image/*">
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-6">
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-prepend">
                        <span class="input-group-text">배너이미지(MOBILE)</span>
                    </span>
                    <input type="file" class="form-control form-control-plaintext" placeholder="파일첨부" name="msbnMobileFile" accept="image/*">
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-12">
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-prepend">
                        <span class="input-group-text">링크(URL)</span>
                    </span>
                    <input class="form-control" type="text" name="msbnUrl" th:value="${banner.msbnUrl}">
                </div>
            </div>
        </div>
    </div>

    <script>
        //배너 추가
        function addBanner(){
            $('#sectionContent').append($('#bannerDom').clone().html());

            $('#popBannerForm select[name=msbnOrder]').select2({
                minimumResultsForSearch: Infinity
            });
        }
        //배너 삭제
        function removeBannerDom(obj){
            if(window.confirm('배너를 삭제하시겠습니까? \n 설정 후 아래 *저장 버튼을 눌러야 DB에 반영됩니다.')){
                $($(obj).parents('.row')[0]).remove();
            }
        }
    </script>
</th:block>

<th:block th:fragment="BOTH">
    BOTH
</th:block>
<th:block th:fragment="BEST">
</th:block>